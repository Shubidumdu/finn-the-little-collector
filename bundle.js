(()=>{"use strict";var t={d:(i,e)=>{for(var o in e)t.o(e,o)&&!t.o(i,o)&&Object.defineProperty(i,o,{enumerable:!0,get:e[o]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)};t.d({},{n:()=>kt});var i=document.getElementById("layer1"),e=document.getElementById("layer2"),o=document.getElementById("layer3"),a=document.getElementById("layer4");function n(){var t,n,r;i.width=window.innerWidth,i.height=window.innerHeight,e.width=window.innerWidth,e.height=window.innerHeight,o.width=window.innerWidth,o.height=window.innerHeight,a.width=window.innerWidth,a.height=window.innerHeight,t=document.querySelector("meta[name='viewport']"),document.querySelector("#c"),n=Math.round(visualViewport.scale*visualViewport.width),r=Math.round(visualViewport.scale*visualViewport.height),n<=460||r<=460?t.setAttribute("content","width=device-width, initial-scale=0.5, user-scalable=0"):n<=768||r<=768?t.setAttribute("content","width=device-width, initial-scale=0.725, user-scalable=0"):t.setAttribute("content","width=device-width, initial-scale=1.0, user-scalable=0")}function r(t){var i=t.getContext("2d");return function(e){i.save(),i.beginPath(),e(i,t),i.closePath(),i.restore()}}function l(t){var i=t.getContext("2d");return function(){i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height)}}var s=r(i),f=r(e),d=r(o),h=r(a),c=l(i),p=l(e),y=l(o),u=l(a);n(),window.addEventListener("resize",n);var m,v=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return w(M.apply(void 0,t))},g=44100,x=new(window.AudioContext||webkitAudioContext),w=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e=x.createBuffer(t.length,t[0].length,g),o=x.createBufferSource();return t.map((function(t,i){return e.getChannelData(i).set(t)})),o.buffer=e,o.connect(x.destination),o.start(),o},M=function(t,i,e,o,a,n,r,l,s,f,d,h,c,p,y,u,m,v,x,w){void 0===t&&(t=1),void 0===i&&(i=.05),void 0===e&&(e=220),void 0===o&&(o=0),void 0===a&&(a=0),void 0===n&&(n=.1),void 0===r&&(r=0),void 0===l&&(l=1),void 0===s&&(s=0),void 0===f&&(f=0),void 0===d&&(d=0),void 0===h&&(h=0),void 0===c&&(c=0),void 0===p&&(p=0),void 0===y&&(y=0),void 0===u&&(u=0),void 0===m&&(m=0),void 0===v&&(v=1),void 0===x&&(x=0),void 0===w&&(w=0);var M,P,T=2*Math.PI,k=s*=500*T/g/g,S=e*=(1+2*i*Math.random()-i)*T/g,b=[],C=0,A=0,I=0,O=1,D=0,F=0,R=0;for(o=o*g+9,x*=g,a*=g,n*=g,m*=g,f*=500*T/Math.pow(g,3),y*=T/g,d*=T/g,h*=g,c=c*g|0,P=o+x+a+n+m|0;I<P;b[I++]=R)++F%(100*u|0)||(R=r?r>1?r>2?r>3?Math.sin(Math.pow(C%T,3)):Math.max(Math.min(Math.tan(C),1),-1):1-(2*C/T%2+2)%2:1-4*Math.abs(Math.round(C/T)-C/T):Math.sin(C),R=(c?1-w+w*Math.sin(T*I/c):1)*(R>0?1:-1)*Math.pow(Math.abs(R),l)*t*.2*(I<o?I/o:I<o+x?1-(I-o)/x*(1-v):I<o+x+a?v:I<P-m?(P-I-m)/n*v:0),R=m?R/2+(m>I?0:(I<P-m?1:(P-I)/m)*b[I-m|0]/2):R),C+=(M=(e+=s+=f)*Math.cos(y*A++))-M*p*(1-1e9*(Math.sin(I)+1)%2),O&&++O>h&&(e+=d,S+=d,O=0),!c||++D%c||(e=S,s=k,O=O||1);return b},P=function(){v.apply(void 0,[1.59,,345,,,.38,3,1.64,2.9,,,,,.2,,.3,.04,.92])},T=function(){v.apply(void 0,[1.38,,334,.17,.14,.11,1,.42,,,,,,,6.8,,.05,.25,.17])},k=function(){v.apply(void 0,[1.01,,1129,.05,.01,0,1,1.11,-89,,,,,,,,,.39,.04,.48])},S={life:100,position:{x:3,y:0},damage:{start:-1/0,duration:600},attack:{type:0,sound:[],start:-1/0,duration:1e3,predelay:0,delay:0,power:10,position:[]},move:{start:-1/0,predelay:1e3,speed:100,position:{x:3,y:3}}},b=function(){return(b=Object.assign||function(t){for(var i,e=1,o=arguments.length;e<o;e++)for(var a in i=arguments[e])Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);return t}).apply(this,arguments)},C=function(t){var i=t.start,e=t.predelay,o=t.speed,a=t.position;S.move=b(b({},S.move),{start:i,predelay:e||S.move.predelay,speed:o||S.move.speed,position:a})},A=function(t){var i=t.type,e=t.start,o=t.position,a=t.predelay,n=t.delay,r=t.duration,l=t.power,s=t.sound;S.attack={type:i,sound:s,start:e,duration:r,predelay:a,delay:n,position:o,power:l}},I={life:100,position:{x:0,y:0},collisionDamage:20,direction:1,attack:{start:-1/0,predelay:80,delay:80,duration:32,power:10},damage:{start:-1/0,duration:400},move:{start:-1/0,speed:50,position:{x:0,y:0}}},O={size:4,tileWidth:120,tileHeight:40},D=function(t){return Math.PI/180*t},F=function(t){var i=t.time,e=t.start,o=t.duration,a=(i-e)/o<0?0:(i-e)/o;return[a<1&&a>0,a,(i-e)/o<0,(i-e)/o>1]},R=function(t){return Math.floor(Math.random()*t)},W=function(t,e){return{x:i.width/2+(t*O.tileWidth-(O.tileWidth+O.tileHeight)-e*O.tileWidth/6),y:i.height/2+(e-.5)+O.tileHeight*(e+.5)-40}},E=function(){return(E=Object.assign||function(t){for(var i,e=1,o=arguments.length;e<o;e++)for(var a in i=arguments[e])Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);return t}).apply(this,arguments)},H=function(t){var i=t.start,e=t.position;I.move=E(E({},I.move),{start:i,position:e})},B=function(t){var i=performance.now();F({time:i,start:I.attack.start,duration:I.attack.duration+I.attack.predelay+I.attack.delay})[0]||(I.attack.start=i,I.direction=t,v.apply(void 0,[,,334,,.08,.09,2,1.52,-7.8,2.1,,,.02,.2,-28,,,.65,.1]))},L=function(t){F({time:performance.now(),start:I.damage.start,duration:I.damage.duration})[0]||(I.damage=E(E({},I.damage),{start:performance.now()}),I.life=I.life-t<0?0:I.life-t,v.apply(void 0,[2.19,,,,,.11,3,.1,-3.7,.8,,,.19,.5,,.4,.19,.87,.06,.18]))},q=function(t,i){for(var e=0,o=i.length,a=t.length;e<o;e++,a++)t[a]=i[e];return t};const Y=function(t,i,e,o){void 0===o&&(o=125);for(var a,n,r,l,s,f,d,h,c,p,y,u,m,v,x=0,w=[],P=[],T=[],k=0,S=0,b=1,C={},A=g/o*60>>2;b;k++)w=[b=h=u=0],e.map((function(o,g){for(d=i[o][k]||[0,0,0],b|=!!i[o][k],v=u+(i[o][0].length-2-!h)*A,m=g==e.length-1,n=2,l=u;n<d.length+m;h=++n){for(s=d[n],c=n==d.length+m-1&&m||p!=(d[0]||0)|s|0,r=0;r<A&&h;r++>A-99&&c?y+=(y<1)/99:0)f=(1-y)*w[x++]/2||0,P[l]=(P[l]||0)-f*S+f,T[l]=(T[l++]||0)+f*S+f;s&&(y=s%1,S=d[1]||0,(s|=0)&&(w=C[[p=d[x=0]||0,s]]=C[[p,s]]||((a=q([],t[p]))[2]*=Math.pow(2,(s-12)/12),s>0?M.apply(void 0,a):[])))}u=v}));return[P,T]};var X,G,j,z,U,V,N,J=Y.apply(void 0,[[[,0,400,,,,,12],[.6,0,25,.002,.02,.08,3,,,,,,,,,.1,.01],[.4,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1],[2,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.8,0,655,,,.09,3,1.65,,,,,.02,3.8,-.1,,.2]],[[[,,5,5,8,5,5,8,5,5,5,10,5,5,12,5,8,5,5,5,6,5,5,8,5,5,12,5,5,10,5,5,8,5],[1,,17,17,20,17,17,20,17,17,20,17,17,20,17,17,20,17,17,20,17,17,20,17,17,20,17,17,20,17,17,20,17,17],[2,1,,,5,,,5,,,5,,,5,,,5,5,,,5,,,5,,,5,,,5,,,5,5],[3,,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,17],[4,,,,5,,,5,,,5,,,5,,,5,5,,,5,,,5,,,5,,,5,,,5,5]]],[0],120]),K=Y.apply(void 0,[[[,0,400],[.6,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.6,0,655,,,.09,3,1.65,,,,,.02,3.8,-.1,,.2],[,0,25,.002,.02,.08,3,,,,,,,,,.1,.01]],[[[,,22,22,25,29,22,22,25,29,20,20,24,27,20,20,24,27,18,18,22,25,18,18,22,25,20,20,24,27,29,27,25,24],[1,-.2,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22],[2,.2,,,22,,,,22,,,,22,,,,22,,,,22,,,,22,,,,22,,,22,22,22],[3,,10,,13,10,,10,13,10,,8,,15,8,,12,,6,,10,13,,6,10,13,,8,,12,15,17,15,13]]],[0],68]),Q=Y.apply(void 0,[[[,0,740,,,.15,2,.2,-.1,-.15,9,.02,,.1,.12,,.06],[.7,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.8,0,219,,,,,1.1,,-.1,-50,-.05,-.01,1],[,0,43,,,.25,,,,,,,,2],[.4,0,22,,.07,.07,2,0,,,.5,.01],[,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1]],[[[,,10,10,13,10,15,10,17,10,,10,13,10,15,10,17,,22,22,25,22,27,22,29,22,,22,25,22,27,22,29,,8,8,12,8,13,8,15,8,,8,12,8,13,8,15,,20,20,24,20,25,20,27,20,,20,24,20,25,20,27,,],[1,,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5],[2,,,,30,,,,30,,,,30,30,,,30,,,,30,,,,30,,,,30,30,,,30,,,,30,,,,30,,,,30,30,,,30,,,,30,,,,30,,,,30,30,,,30,,],[4,,10,10,,6,10,10,,6,10,10,,6,10,10,,6,10,10,,6,10,10,,6,10,10,,6,10,10,,,8,8,,3,8,8,,3,8,8,,3,8,8,,3,8,8,,3,8,8,,3,8,8,,3,8,8,,,],[5,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,]]],[0],84]),Z=Y.apply(void 0,[[[,0,740,,,.15,2,.2,-.1,-.15,9,.02,,.1,.12,,.06],[.3,0,900,.02,,.07,4,0,,,,,,4],[.7,0,22,,.07,.07,2,0,,,.5,.01]],[[[,,,,,,,,,,,,,,,,,,22,,22,,25,27,,29,,27,,25,,22,,,20,,20,,17,20,,22,,,,,34,,,,],[1,,22,22,20,,22,22,20,,22,22,20,,22,22,20,,22,22,20,,22,22,20,,22,22,20,,22,22,20,,22,22,20,,22,22,20,,22,22,20,,22,22,20,,]]],[0],120]),$=function(t,i){return void 0===t&&(t=32),void 0===i&&(i="Arial Black, Arial, sans-serif"),"bold "+t+"pt "+i},_="#E5FF3F",tt="#FFF",it=[],et={index:0,openGuide:!1},ot=function(t){s((function(t,i){t.setTransform(1,0,0,1,i.width/2,i.height/2),t.globalAlpha=.9,t.fillRect(-i.width/2,-i.height/2,i.width,i.height),t.fillStyle="#fff",t.font=$(18),t.textBaseline="middle",t.textAlign="center",t.fillText("Arrow keys - Move",0,-120),t.fillText("S key - Attack on left tile",0,-90),t.fillText("D key - Attack on right tile",0,-60)})),s((function(t,i){t.strokeStyle="#0F0",t.shadowColor="#FFF",t.shadowOffsetX=8,t.shadowOffsetY=8,t.setTransform(1,0,-.5,1,i.width/2,i.height/2),t.fillStyle="#fac800",t.fillRect(-220,0,120,40),t.setTransform(1,0,-.5,1,i.width/2,i.height/2),t.fillStyle="#fa2b00",t.fillRect(-180,80,120,40)})),s((function(t,i){t.setTransform(1,0,0,1,i.width/2,i.height/2),t.fillStyle="#fff",t.font=$(16),t.fillText("Yellow tile",-60,20),t.fillText("Red tile",-60,100),t.font=$(12),t.fillText("means the position enemy will move to",-60,42),t.fillText("means the position enemy will attack to",-60,120),t.textBaseline="middle",t.textAlign="center",t.fillText("Press S or D key to back to title",0,180)}))},at=function(t){s((function(t,i){t.beginPath();var e=t.createLinearGradient(0,0,0,innerHeight);e.addColorStop(.4,"#161C26"),e.addColorStop(.48,"#594438"),e.addColorStop(.5,"#F2B872"),e.addColorStop(.7,"#D99B66"),t.fillStyle=e,t.fillRect(0,0,i.width,i.height),t.closePath()})),s((function(t,i){if(t.fillStyle="#fff",!it.length)for(var e=0;e<50;e++){var o=Math.random()*i.width,a=Math.random()*(i.height/3),n=.5*(Math.random()-.5),r=0*(Math.random()-.5),l=2*Math.random()+1;it.push({x:o,y:a,dx:n,dy:r,radius:l})}it.forEach((function(e,o){var a=e.x,n=e.y,r=e.dx,l=e.dy,s=e.radius,f=a+2*r,d=n+2*l;f<0&&(it[o].dx=-r),d<0&&(it[o].dy=-l),f>i.width&&(it[o].dx=-r),d>i.height&&(it[o].dy=-l),it[o].x=f,it[o].y=d,t.beginPath(),t.arc(f,d,s,0,D(360)),t.fill(),t.closePath()}))}))},nt=function(){(G=w.apply(void 0,K)).loop=!0},rt=function(){G.stop()},lt=function(){kt.sceneType=0,kt.music&&nt(),X=function(t){var i=t.target;if(et.openGuide)"s"!==t.key&&"S"!==t.key&&"d"!==t.key&&"D"!==t.key&&"d"!==i.id&&"s"!==i.id||(k(),et.openGuide=!1);else{if("ArrowLeft"===t.key||"al"===i.id){if(0===et.index)return;et.index-=1,k()}if("ArrowRight"===t.key||"ar"===i.id){if(2===et.index)return;et.index+=1,k()}"s"!==t.key&&"S"!==t.key&&"d"!==t.key&&"D"!==t.key&&"d"!==i.id&&"s"!==i.id||(k(),0===et.index&&(Pt(),st()),1===et.index&&(kt.music=!kt.music,kt.music?nt():rt()),2===et.index&&(et.openGuide=!0))}},window.addEventListener("keydown",X),document.addEventListener("touchstart",X)},st=function(){kt.music&&rt(),window.removeEventListener("keydown",X),document.removeEventListener("touchstart",X)},ft="#E5FF3F",dt="#FFF",ht={index:0},ct=function(){wt.stage-=1,kt.music&&z.stop(),window.removeEventListener("keydown",j),document.removeEventListener("touchstart",j)},pt="#E5FF3F",yt="#FFF",ut={startTime:0,index:0},mt=function(){kt.music&&V.stop(),window.removeEventListener("keydown",U),document.removeEventListener("touchstart",U)},vt=[],gt=function(){return(gt=Object.assign||function(t){for(var i,e=1,o=arguments.length;e<o;e++)for(var a in i=arguments[e])Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);return t}).apply(this,arguments)},xt=function(t,i){for(var e=0,o=i.length,a=t.length;e<o;e++,a++)t[a]=i[e];return t},wt={stage:0,countDownSound:[!1,!1,!1],startTime:0,scoreTime:0,playTime:0,player:I,map:O,enemy:S},Mt=function(t){if(wt.playTime=t-wt.startTime,wt.scoreTime=wt.playTime-3e3,wt.playTime<3e3){var i=Math.ceil(wt.playTime/1e3)-1;wt.countDownSound[i]||(v.apply(void 0,[2.35,,377,,,.11,1,2.31,,-4.9,,,,.5,,.4,.1,.68,.08]),wt.countDownSound[i]=!0)}else{if(S.life<=0&&(Tt(),kt.sceneType=3,kt.music&&((V=w.apply(void 0,Q)).loop=!0),U=function(t){var i=t.target;if("ArrowLeft"===t.key||"al"===i.id){if(0===ut.index)return;ut.index-=1,k()}if("ArrowRight"===t.key||"ar"===i.id){if(1===ut.index)return;ut.index+=1,k()}"s"!==t.key&&"S"!==t.key&&"d"!==t.key&&"D"!==t.key&&"s"!==i.id&&"d"!==i.id||(k(),wt.stage<5?0===ut.index&&(Pt(),mt()):0===ut.index&&(wt.stage=0,lt(),mt()),1===ut.index&&(wt.stage-=1,Pt(),mt()))},setTimeout((function(){window.addEventListener("keydown",U),document.addEventListener("touchstart",U)}),600)),I.life<=0&&(Tt(),kt.sceneType=2,kt.music&&(z=w.apply(void 0,Z)),j=function(t){var i=t.target;if("ArrowLeft"===t.key||"al"===i.id){if(0===ht.index)return;ht.index-=1,k()}if("ArrowRight"===t.key||"ar"===i.id){if(1===ht.index)return;ht.index+=1,k()}"S"!==t.key&&"s"!==t.key&&"d"!==t.key&&"D"!==t.key&&"s"!==i.id&&"d"!==i.id||(0===ht.index&&(Pt(),ct()),1===ht.index&&(lt(),ct(),wt.stage=0))},setTimeout((function(){window.addEventListener("keydown",j),document.addEventListener("touchstart",j)}),600)),(S.move.position.x!==S.position.x||S.move.position.y!==S.position.y)&&S.move.start!==-1/0){var e=F({time:t,start:S.move.start+S.move.predelay,duration:S.move.speed}),o=e[0];e[1]>=1&&(S.position=gt({},S.move.position))}var a=F({time:t,start:I.move.start,duration:I.move.speed}),n=a[0],r=(a[1],a[2],a[3]);if(!n&&r&&(I.position=gt({},I.move.position)),function(t){var i,e=F({time:t,start:I.attack.start+I.attack.predelay,duration:I.attack.duration}),o=e[0];e[1],o&&!F({time:t,start:S.damage.start,duration:S.damage.duration})[0]&&(-1===I.direction&&S.position.x===I.position.x-1&&S.position.y===I.position.y||1===I.direction&&S.position.x===I.position.x+1&&S.position.y===I.position.y)&&(i=I.attack.power,S.damage=b(b({},S.damage),{start:performance.now()}),S.life=S.life-i<0?0:S.life-i,v.apply(void 0,[1.01,,376,,,.11,1,1.65,-8.2,,,,,.4,,.1,,.93,.04]))}(t),S.position.x===I.position.x&&S.position.y===I.position.y&&L(I.collisionDamage),F({time:t,start:S.attack.start+S.attack.predelay,duration:S.attack.duration})[0]&&S.attack.position.some((function(t){var i=t.x,e=t.y;return i===I.position.x&&e===I.position.y}))&&L(S.attack.power),1===wt.stage){var l=F({time:t,start:S.move.start,duration:S.move.predelay+S.move.speed});o=l[0],l[1]>=1&&!o&&(S.position.x!==I.position.x||S.position.y!==I.position.y)&&C({start:t,predelay:500,speed:200,position:{x:I.position.x,y:I.position.y}})}if(2===wt.stage){var s=F({time:t,start:S.attack.start,duration:S.attack.predelay+S.attack.duration+S.attack.delay}),f=(s[0],s[1],s[2],s[3]),d=F({time:t,start:S.move.start,duration:S.move.predelay+S.move.speed}),h=(o=d[0],d[1],d[2],d[3]),c=F({time:t,start:S.attack.start,duration:S.attack.predelay}),p=c[0],y=(c[1],c[2],c[3],F({time:t,start:S.attack.start+S.attack.predelay,duration:S.attack.duration})),u=y[0];if(y[1],y[2],y[3],p&&(S.attack.sound[0]||(v.apply(void 0,[.3,,166,.08,.48,.99,,.67,,,8,.03,.13,.1,,,,.98,.09,.28]),S.attack.sound[0]=!0)),u&&(S.attack.sound[1]||(v.apply(void 0,[2.01,,521,.03,.03,.06,,1.68,-7.9,-.6,,,,,,.1,.14,.84,.04,.44]),S.attack.sound[1]=!0)),h&&f){for(var m=Math.floor(4*Math.random()),g=Math.floor(4*Math.random());m===S.position.x&&g===S.position.y;)m=Math.floor(4*Math.random()),g=Math.floor(4*Math.random());C({start:t,predelay:300,speed:100,position:{x:m,y:g}}),A({start:t+400,predelay:400,position:[{x:S.move.position.x,y:0},{x:S.move.position.x,y:1},{x:S.move.position.x,y:2},{x:S.move.position.x,y:3},{x:0,y:S.move.position.y},{x:1,y:S.move.position.y},{x:2,y:S.move.position.y},{x:3,y:S.move.position.y}],delay:200,duration:200,power:20,sound:[!1,!1]})}}if(3===wt.stage){var x=F({time:t,start:S.attack.start+S.attack.predelay,duration:S.attack.duration+S.attack.delay}),M=x[0],O=(x[1],x[2],f=x[3],F({time:t,start:S.move.start,duration:S.move.predelay+S.move.speed}));if(o=O[0],O[1],O[2],h=O[3],M&&!S.attack.sound[0]&&(v.apply(void 0,[1.87,,695,.05,.13,.52,3,.24,,.7,,,,1,38,.6,.13,.58,.02]),S.attack.sound[0]=!0),h){for(m=Math.floor(4*Math.random()),g=Math.floor(4*Math.random());m===S.position.x&&g===S.position.y;)m=Math.floor(4*Math.random()),g=Math.floor(4*Math.random());C({start:t,predelay:300,speed:200,position:{x:m,y:g}})}f&&A({start:t,predelay:300,delay:0,position:[{x:I.position.x,y:I.position.y}],duration:400,power:20,sound:[!1]})}if(4===wt.stage){var D=F({time:t,start:S.attack.start+S.attack.predelay,duration:S.attack.duration+S.attack.delay}),W=D[0],E=(D[1],D[2],f=D[3],F({time:t,start:S.move.start,duration:S.move.predelay+S.move.speed})),H=(o=E[0],E[1],E[2],h=E[3],F({time:t,start:S.attack.start,duration:S.attack.predelay}));if(p=H[0],H[1],H[2],H[3],p&&(0!==S.attack.type||S.attack.sound[0]||(v.apply(void 0,[1.15,,76,,.24,.08,,1.19,,25,-791,.05,.04,.8,-141,,.12,,.08]),S.attack.sound[0]=!0)),W&&(0!==S.attack.type||S.attack.sound[1]||(v.apply(void 0,[1.99,,378,,.11,.24,,.42,.1,,-765,.04,,.4,,,.21]),S.attack.sound[1]=!0),1!==S.attack.type||S.attack.sound[0]||(v.apply(void 0,[,,840,.05,.06,.08,,1.06,-6.1,,,,,,,,,.73,.01]),S.attack.sound[0]=!0)),h&&f)if(0===(X=Math.floor(2*Math.random()))){for(var B={x:R(4),y:R(4)};B.x===S.move.position.x;)B.x=R(4);for(;B.y===S.move.position.y;)B.y=R(4);C({start:t,predelay:300,speed:100,position:B});for(var q={x:R(4),y:R(4)};q.x===S.move.position.x;)q.x=R(4);for(;q.y===S.move.position.y;)q.y=R(4);A({type:0,start:t+300,predelay:900,delay:0,position:[0,1,2,3].reduce((function(t,i){var e=[0,1,2,3].map((function(t){return{x:i,y:t}})).filter((function(t){var i=t.x,e=t.y;return!(i===B.x&&e===B.y||i===q.x&&e===q.y)}));return xt(xt([],t),e)}),[]),duration:200,power:20,sound:[!1,!1]})}else{var Y={x:R(4),y:R(4)};C({start:t,predelay:300,speed:100,position:Y}),A({type:1,start:t+200,predelay:400,delay:100,position:[0,1,2,3].map((function(t){return{x:t,y:R(4)}})),duration:200,power:20,sound:[!1]})}}if(5===wt.stage){var X,G=F({time:t,start:S.attack.start+S.attack.predelay,duration:S.attack.duration+S.attack.delay}),N=G[0],J=(G[1],G[2],f=G[3],F({time:t,start:S.move.start,duration:S.move.predelay+S.move.speed})),K=(o=J[0],J[1],J[2],h=J[3],F({time:t,start:S.attack.start,duration:S.attack.predelay}));p=K[0],K[1],K[2],K[3],p&&(0!==S.attack.type||S.attack.sound[0]||(T(),S.attack.sound[0]=!0),2!==S.attack.type||S.attack.sound[0]||(T(),S.attack.sound[0]=!0)),N&&(0!==S.attack.type||S.attack.sound[1]||(P(),S.attack.sound[1]=!0),1!==S.attack.type||S.attack.sound[0]||(v.apply(void 0,[1.52,,102,,,.3,,2.47,-.6,,,,,.3,,.4,.02,.74,.04,.11]),S.attack.sound[0]=!0),2!==S.attack.type||S.attack.sound[1]||(P(),S.attack.sound[1]=!0)),h&&f&&(0===(X=R(3))&&(C({start:t,predelay:200,speed:100,position:{x:3*R(2),y:R(2)+1}}),A({type:0,start:t+300,position:3===S.move.position.x?[0,1,2].reduce((function(t,i){var e=[-1,0,1].map((function(t){return{x:i,y:S.move.position.y+t}}));return xt(xt([],t),e)}),[]):0===S.move.position.x?[1,2,3].reduce((function(t,i){var e=[-1,0,1].map((function(t){return{x:i,y:S.move.position.y+t}}));return xt(xt([],t),e)}),[]):void 0,predelay:600,delay:200,duration:300,power:20,sound:[!1,!1]})),1===X&&(C({start:t,predelay:200,speed:100,position:{x:0===I.position.x?1:3===I.position.x?2:I.position.x-2*R(2)+1,y:I.position.y}}),A({type:1,start:t,position:[{x:I.position.x,y:I.position.y}],predelay:300,delay:100,duration:100,power:20,sound:[!1]})),2===X&&(C({start:t,predelay:200,speed:100,position:{x:R(2)+1,y:R(2)+1}}),A({type:2,start:t+300,position:[-1,0,1].reduce((function(t,i){var e=[-1,0,1].map((function(t){return{x:S.move.position.x+i,y:S.move.position.y+t}})).filter((function(t){var i=t.x,e=t.y;return i!==S.move.position.x||e!==S.move.position.y}));return xt(xt([],t),e)}),[]),predelay:600,delay:200,duration:200,power:20,sound:[!1,!1]})))}}},Pt=function(){wt.stage+=1,wt.startTime=performance.now(),wt.countDownSound=[!1,!1,!1],S={life:100,position:{x:3,y:0},damage:{start:-1/0,duration:600},attack:{type:0,sound:[],start:-1/0,duration:1e3,predelay:0,delay:0,power:10,position:[]},move:{start:-1/0,predelay:1e3,speed:100,position:{x:3,y:3}}},I={life:100,position:{x:0,y:0},collisionDamage:20,direction:1,attack:{start:-1/0,predelay:80,delay:80,duration:32,power:10},damage:{start:-1/0,duration:400},move:{start:-1/0,speed:50,position:{x:0,y:0}}},kt.music&&((N=w.apply(void 0,J)).loop=!0),kt.sceneType=1,m=function(t){var i=t.target;if(!(wt.playTime<3e3)){if("ArrowRight"===t.key||"ArrowLeft"===t.key||"ArrowUp"===t.key||"ArrowDown"===t.key||"al"===i.id||"au"===i.id||"ar"===i.id||"ad"===i.id){if(I.move.position.x!==I.position.x||I.move.position.y!==I.position.y)return;"ArrowRight"!==t.key&&"ar"!==i.id||I.position.x!==O.size-1&&H({start:performance.now(),position:{x:I.position.x+1,y:I.position.y}}),"ArrowLeft"!==t.key&&"al"!==i.id||0!==I.position.x&&H({start:performance.now(),position:{x:I.position.x-1,y:I.position.y}}),"ArrowUp"!==t.key&&"au"!==i.id||0!==I.position.y&&H({start:performance.now(),position:{x:I.position.x,y:I.position.y-1}}),"ArrowDown"!==t.key&&"ad"!==i.id||I.position.y!==O.size-1&&H({start:performance.now(),position:{x:I.position.x,y:I.position.y+1}})}"d"!==t.key&&"D"!==t.key&&"d"!==i.id||B(1),"s"!==t.key&&"S"!==t.key&&"s"!==i.id||B(-1)}},window.addEventListener("keydown",m),document.addEventListener("touchstart",m)},Tt=function(){kt.music&&N.stop(),window.removeEventListener("keydown",m),document.removeEventListener("touchstart",m)},kt={sceneType:0,music:!1},St=function(t){c(),p(),y(),u(),0===kt.sceneType&&function(t){at(t),s((function(i,e){!function(t){s((function(i,e){i.setTransform(1,0,0,2,e.width/2,e.height/2+20+1*Math.sin(t/80)),i.filter="blur(4px)",i.ellipse(0,50,60,5,0,0,D(360)),i.fillStyle="#222",i.fill()})),s((function(t,i){t.setTransform(1,0,0,1,i.width/2,i.height/2),t.globalAlpha=.3,t.fillStyle="#ffa",t.filter="blur(2px)",t.beginPath(),t.ellipse(0,120,120,20,0,0,D(360)),t.fill(),t.closePath()})),s((function(i,e){i.setTransform(1,0,0,2,e.width/2,e.height/2+20+10*Math.sin(t/80)),i.arc(0,0,40,0,D(360)),i.shadowOffsetX=0,i.shadowOffsetY=0,i.fillStyle="#6A3D3D",i.fill()})),s((function(i,e){i.setTransform(1,0,0,1,e.width/2,e.height/2+20+10*Math.sin(t/80)),i.fillStyle="#000",i.arc(-10,-40,5,0,D(360)),i.arc(10,-40,5,0,D(360)),i.fill()})),s((function(i,e){i.setTransform(1,0,0,1,e.width/2,e.height/2+20+10*Math.sin(t/80)),i.arc(0,-20,10,0,D(180)),i.fillStyle="#000",i.fill()})),s((function(i,e){i.setTransform(1,0,0,1,e.width/2,e.height/2+20+10*Math.sin(t/80)),i.moveTo(-25,10),i.quadraticCurveTo(-40-10*Math.sin(t/80),-20-10*Math.sin(t/80),-25-20*Math.sin(t/80),-60-10*Math.sin(t/80)),i.moveTo(25,10),i.quadraticCurveTo(40+10*Math.sin(t/80),-20-10*Math.sin(t/80),25+20*Math.sin(t/80),-60-10*Math.sin(t/80)),i.stroke()})),s((function(i,e){i.setTransform(1,0,0,1,e.width/2,e.height/2),i.moveTo(-20,70+10*Math.sin(t/80)),i.quadraticCurveTo(-40,80,-40,120),i.moveTo(20,70+10*Math.sin(t/80)),i.quadraticCurveTo(40,80,40,120),i.stroke()})),s((function(i,e){i.setTransform(1,0,0,1,e.width/2,e.height/2+20+10*Math.sin(t/80)),i.moveTo(-10,-60),i.quadraticCurveTo(-20-5*Math.sin(t/80),5*Math.sin(t/80)-120,-40-5*Math.sin(t/80),5*Math.sin(t/80)-80),i.moveTo(10,-60),i.quadraticCurveTo(20+5*Math.sin(t/80),5*Math.sin(t/80)-120,40+5*Math.sin(t/80),5*Math.sin(t/80)-80),i.stroke()})),s((function(t,i){t.setTransform(1,0,0,1,i.width/2,i.height/2),t.globalAlpha=.3,t.fillStyle="#ffa",t.filter="blur(2px)",t.beginPath(),t.moveTo(-120,120),t.lineTo(-40,-250),t.lineTo(40,-250),t.lineTo(120,120),t.ellipse(0,120,120,20,0,0,D(360)),t.fill(),t.closePath()})),s((function(t,i){t.setTransform(1,0,0,1,i.width/2,i.height/2),t.beginPath(),t.fillStyle="#fff",t.shadowOffsetY=6,t.shadowColor="#000",t.ellipse(0,-240,240,20,0,0,D(360)),t.fillStyle="#fff",t.fill(),t.closePath(),t.beginPath(),t.shadowOffsetX=8,t.shadowOffsetY=0,t.ellipse(0,-250,120,60,0,D(180),D(360)),t.fillStyle="#D5D471",t.fill(),t.closePath(),t.beginPath(),t.ellipse(0,-250,120,10,0,D(0),D(360)),t.shadowOffsetX=8,t.shadowOffsetY=1,t.fillStyle="#C4C639",t.fill(),t.closePath()}))}(t)})),s((function(t,i){t.setTransform(1,0,0,1,i.width/2,i.height/2-160),t.textBaseline="middle",t.textAlign="center",t.font=$(48),t.fillStyle="#fff",t.shadowOffsetX=6,t.shadowOffsetY=6,t.shadowColor="#000",t.fillText("ASTROACH",0,0)})),s((function(t,i){t.setTransform(1,0,0,1,i.width/2,i.height/2+200),t.textBaseline="middle",t.textAlign="center",t.shadowColor="#000",t.shadowOffsetX=4,t.shadowOffsetY=4,t.font=$(24),t.beginPath(),0===et.index?t.fillStyle=_:t.fillStyle=tt,t.fillText("START",-240,0),t.closePath(),t.beginPath(),1===et.index?t.fillStyle=_:t.fillStyle=tt,t.fillText("MUSIC",0,0),t.closePath(),t.beginPath(),2===et.index?t.fillStyle=_:t.fillStyle=tt,t.fillText("GUIDE",240,0),t.closePath(),t.beginPath(),1===et.index?t.fillStyle=_:t.fillStyle=tt,t.font=$(20),kt.music?t.fillText("ON",0,40):t.fillText("OFF",0,40),t.closePath()})),et.openGuide&&ot(t)}(t),1===kt.sceneType&&function(t){switch(Mt(t),function(t){var i=t.time,e=t.enemy,o=t.map,a=o.size,n=o.tileWidth,r=o.tileHeight,l=F({time:i,start:e.move.start,duration:e.move.predelay})[0],f=F({time:i,start:e.attack.start,duration:e.attack.predelay})[0];1===wt.stage&&s((function(t,i){t.beginPath();var e=t.createLinearGradient(0,0,0,innerHeight);e.addColorStop(.3,"#0D0D0D"),e.addColorStop(.39,"#401410"),e.addColorStop(.4,"#D97652"),e.addColorStop(.8,"#8C3420"),t.fillStyle=e,t.fillRect(0,0,i.width,i.height),t.closePath()})),2===wt.stage&&s((function(t,i){t.beginPath();var e=t.createLinearGradient(0,0,0,innerHeight);e.addColorStop(.35,"#252E3E"),e.addColorStop(.4,"#44A748"),e.addColorStop(.4,"#96DF50"),e.addColorStop(.8,"#5FBF03"),t.fillStyle=e,t.fillRect(0,0,i.width,i.height),t.closePath()})),3===wt.stage&&s((function(t,i){t.beginPath();var e=t.createLinearGradient(0,0,0,innerHeight);e.addColorStop(.34,"#1B1A1F"),e.addColorStop(.38,"#FB3D31"),e.addColorStop(.4,"#CC1017"),e.addColorStop(.8,"#51191E"),t.fillStyle=e,t.fillRect(0,0,i.width,i.height),t.closePath()})),4===wt.stage&&s((function(t,i){t.beginPath();var e=t.createLinearGradient(0,0,0,innerHeight);e.addColorStop(.36,"#182026"),e.addColorStop(.38,"#B6DBF2"),e.addColorStop(.6,"#8BBBD9"),e.addColorStop(.8,"#759CBF"),t.fillStyle=e,t.fillRect(0,0,i.width,i.height),t.closePath()})),5===wt.stage&&s((function(t,i){t.beginPath();var e=t.createLinearGradient(0,0,0,innerHeight);e.addColorStop(.38,"#0D0D0D"),e.addColorStop(.39,"#F2F2F2"),e.addColorStop(.6,"#D7D7D9"),e.addColorStop(.8,"#979DA6"),t.fillStyle=e,t.fillRect(0,0,i.width,i.height),t.closePath()})),s((function(t,i){if(t.fillStyle="#fff",!vt.length)for(var e=0;e<50;e++){var o=Math.random()*i.width,a=Math.random()*(i.height/3),n=.5*(Math.random()-.5),r=0*(Math.random()-.5),l=2*Math.random()+1;vt.push({x:o,y:a,dx:n,dy:r,radius:l})}vt.forEach((function(e,o){var a=e.x,n=e.y,r=e.dx,l=e.dy,s=e.radius,f=a+2*r,d=n+2*l;f<0&&(vt[o].dx=-r),d<0&&(vt[o].dy=-l),f>i.width&&(vt[o].dx=-r),d>i.height&&(vt[o].dy=-l),vt[o].x=f,vt[o].y=d,t.beginPath(),t.arc(f,d,s,0,D(360)),t.fill(),t.closePath()}))})),s((function(t,i){t.setTransform(1,0,-.5,1,i.width/2-n*a/2+n/4,i.height/2-40),t.lineWidth=2,1===wt.stage&&(t.strokeStyle="#5A290C",t.shadowColor="#240000"),2===wt.stage&&(t.strokeStyle="#252E3E",t.shadowColor="#0B020E"),3===wt.stage&&(t.strokeStyle="#51191E",t.shadowColor="#1B1A1F"),4===wt.stage&&(t.strokeStyle="#182026",t.shadowColor="#182026"),5===wt.stage&&(t.strokeStyle="#0D0D0D",t.shadowColor="#0D0D0D"),t.shadowOffsetX=8,t.shadowOffsetY=8;for(var o=function(i){for(var o=function(o){l&&e.move.position.x===o&&e.move.position.y===i?(t.shadowOffsetX=8,t.shadowOffsetY=8,t.fillStyle="#fac800",t.fillRect(n*o,r*i,n,r),t.shadowOffsetX=0,t.shadowOffsetY=0,t.strokeRect(n*o,r*i,n,r)):f&&e.attack.position.some((function(t){var e=t.x,a=t.y;return o===e&&i===a}))?(t.shadowOffsetX=8,t.shadowOffsetY=8,t.fillStyle="#fa2b00",t.fillRect(n*o,r*i,n,r),t.shadowOffsetX=0,t.shadowOffsetY=0,t.strokeRect(n*o,r*i,n,r)):(t.shadowOffsetX=8,t.shadowOffsetY=8,t.fillStyle="#fff",t.fillRect(n*o,r*i,n,r),t.shadowOffsetX=0,t.shadowOffsetY=0,t.strokeRect(n*o,r*i,n,r))},s=0;s<a;s++)o(s)},s=0;s<a;s++)o(s)}))}({map:wt.map,enemy:S,time:t}),function(t){var e=t.time,o=t.player,a=t.map,n=F({time:e,start:o.attack.start,duration:o.attack.predelay+o.attack.duration+o.attack.delay}),r=n[0],l=n[1],s=F({time:e,start:o.move.start,duration:o.move.speed}),h=s[0],c=s[1];if(!F({time:e,start:o.damage.start,duration:o.damage.duration})[0]||Math.ceil(e)%4!=0){var p=Math.sin(e/240),y=h?i.width/2+(-(a.tileWidth+a.tileHeight)+(o.position.x+(o.move.position.x-o.position.x)*c)*a.tileWidth-(o.position.y+(o.move.position.y-o.position.y)*c)*a.tileWidth/6):i.width/2+(-(a.tileWidth+a.tileHeight)+o.position.x*a.tileWidth-o.position.y*a.tileWidth/6),u=h?i.height/2+(o.position.y+(o.move.position.y-o.position.y)*c-.5)*a.tileHeight-40:i.height/2+(o.position.y-.5)*a.tileHeight-40,m=function(t){t.setTransform(1,0,0,1,y,u),t.beginPath(),t.globalAlpha=.2,1===I.direction?r?t.ellipse(4-10*l,42,35-1*p,10-p,0,0,2*Math.PI):t.ellipse(4,42,35-1*p,10-p,0,0,2*Math.PI):r?t.ellipse(0+10*l,42,35-1*p,10-p,0,0,2*Math.PI):t.ellipse(0,42,35-1*p,10-p,0,0,2*Math.PI),t.shadowOffsetX=0,t.shadowOffsetY=0,1===wt.stage&&(t.fillStyle="#000"),t.fill(),t.closePath(),t.setTransform(1,0,0,1,y,u),t.beginPath(),t.globalAlpha=1,-1===o.direction&&t.scale(-1,1),r&&t.rotate(D(-20)*Math.pow(l,2)*(3*l-3)),t.ellipse(0,p,20,40,0,0,2*Math.PI),t.shadowOffsetX=0,t.shadowOffsetY=0,t.fillStyle="#6A3D3D",t.fill(),t.closePath(),t.beginPath(),t.arc(0,-20+p,3,0,D(360)),t.arc(10,-20+p,3,0,D(360)),t.fillStyle="#000",t.fill(),t.closePath(),t.beginPath(),t.moveTo(-10,-10+p),r?t.quadraticCurveTo(-10,20-30*Math.sin(Math.PI*l),30+5*Math.sin(Math.PI*l),10+5*Math.sin(Math.PI*l)):t.quadraticCurveTo(-10,20+2*p,30,10-2*p),t.moveTo(16,-10+p),r?t.quadraticCurveTo(20,20-30*Math.sin(Math.PI*l),30+5*Math.sin(Math.PI*l),10+5*Math.sin(Math.PI*l)):t.quadraticCurveTo(20,20+2*p,30,10-2*p),t.stroke(),t.closePath(),t.beginPath(),t.moveTo(-10,20),r?t.quadraticCurveTo(-5+p,28+p,-10-10*Math.sin(Math.PI*l),48):h?t.quadraticCurveTo(-5+p,28+p,-10-10*Math.sin(Math.PI*c),48):t.quadraticCurveTo(-5+p,28+p,-10,48),t.moveTo(14,20),r?t.quadraticCurveTo(24+p+2*Math.sin(Math.PI*l),20+p+2*Math.sin(Math.PI*l),20+4*Math.sin(Math.PI*l),40-4*Math.sin(Math.PI*l)):h?t.quadraticCurveTo(24+p+2*Math.sin(Math.PI*c),20+p+2*Math.sin(Math.PI*c),20+4*Math.sin(Math.PI*c),40-4*Math.sin(Math.PI*c)):t.quadraticCurveTo(24+p,20+p,20,40),t.stroke(),t.closePath(),t.beginPath(),t.moveTo(-10,-28+p),r?t.quadraticCurveTo(10+p,-80+p,2*p-24+12*Math.sin(l*Math.PI),-60-2*p-12*Math.sin(l*Math.PI)):t.quadraticCurveTo(10+p,-80+p,2*p-24,-60-2*p),t.moveTo(10,-28+p),r?t.quadraticCurveTo(40+p,-80+p,1+2*p+12*Math.sin(l*Math.PI),-60-2*p-12*Math.sin(l*Math.PI)):t.quadraticCurveTo(40+p,-80+p,1+2*p,-60-2*p),t.stroke(),t.closePath(),t.beginPath(),-1===o.direction?t.setTransform(1,0,0,1,y-28,u+22-Math.sin(e/240)):t.setTransform(1,0,0,1,y+28,u+22-Math.sin(e/240)),-1===o.direction&&t.scale(-1,1),t.fillStyle="#afa",r&&t.rotate(D(-180)*Math.pow(l,2)*(3*l-3)),t.rotate(D(200-Math.sin(e/240))),t.fillRect(0,0,10,120),t.fillStyle="#000",t.fillRect(0,0,10,20),t.closePath()};I.position.y<S.position.y?f((function(t,i){return m(t)})):d((function(t,i){return m(t)}))}}({time:t,player:I,map:O}),wt.stage){case 1:!function(t){var e=t.map,o=t.enemy,a=t.time,n=F({time:a,start:o.move.start+o.move.predelay,duration:o.move.speed}),r=n[0],l=n[1],s=r?i.width/2+(-(e.tileWidth+e.tileHeight)+(o.position.x+(o.move.position.x-o.position.x)*l)*e.tileWidth-(o.position.y+(o.move.position.y-o.position.y)*l)*e.tileWidth/6):i.width/2+(-(e.tileWidth+e.tileHeight)+o.position.x*e.tileWidth-o.position.y*e.tileWidth/6),h=r?i.height/2+(o.position.y+(o.move.position.y-o.position.y)*l-.5)*e.tileHeight+2*Math.sin(a/240)-40:i.height/2+(o.position.y-.5)*e.tileHeight+2*Math.sin(a/240)-40,c=F({time:a,start:o.damage.start,duration:o.damage.duration})[0];if(!c||Math.ceil(a)%8!=0){var p=function(t,i){t.setTransform(1,0,0,1,s,h),S.position.x<I.position.x&&t.scale(-1,1),t.beginPath(),t.ellipse(0,40-2*Math.sin(a/240),44-1*Math.sin(a/240),12-1*Math.sin(a/240),0,0,D(360)),t.fillStyle="#000",t.globalAlpha=.2,t.fill(),t.beginPath(),t.globalAlpha=1,t.ellipse(0,12,45,28,0,0,D(360)),r&&(t.globalAlpha=.4),t.arc(0,0,40,0,D(360)),t.fillStyle=c?"#fa9":"#fed1ff",t.fill(),t.closePath(),t.beginPath(),t.arc(-20,-10,6,0,D(360)),t.fillStyle="#000",t.fill(),t.closePath(),t.beginPath(),t.arc(10,-10,7,0,D(360)),t.fillStyle="#000",t.fill(),t.closePath(),t.beginPath(),t.fillStyle="#fff",t.fillRect(-10,16,10,10),t.closePath(),t.beginPath(),t.lineWidth=2,t.moveTo(-30,14),t.quadraticCurveTo(-10,20,20,14),t.stroke(),t.closePath()};S.position.y<=I.position.y?f((function(t,i){return p(t)})):d((function(t,i){return p(t)}))}}({time:t,enemy:S,map:O,player:I});break;case 2:!function(t){var e=t.map,o=t.enemy,a=t.time,n=F({time:a,start:o.move.start+o.move.predelay,duration:o.move.speed}),r=n[0],l=n[1],s=F({time:a,start:o.attack.start,duration:o.attack.predelay}),c=s[0],p=s[1],y=F({time:a,start:o.attack.start+o.attack.predelay,duration:o.attack.duration+o.attack.delay}),u=y[0],m=y[1],v=r?i.width/2+(-(e.tileWidth+e.tileHeight)+(o.position.x+(o.move.position.x-o.position.x)*l)*e.tileWidth-(o.position.y+(o.move.position.y-o.position.y)*l)*e.tileWidth/6):i.width/2+(-(e.tileWidth+e.tileHeight)+o.position.x*e.tileWidth-o.position.y*e.tileWidth/6),g=(r?i.height/2+(o.position.y+(o.move.position.y-o.position.y)*l-.5)*e.tileHeight+2*Math.sin(a/240):i.height/2+(o.position.y-.5)*e.tileHeight+2*Math.sin(a/240))-40,x=F({time:a,start:o.damage.start,duration:o.damage.duration})[0],w=function(t){t.setTransform(1,0,0,1,v,g),t.beginPath(),S.position.x<I.position.x&&t.scale(-1,1),t.ellipse(0,40-2*Math.sin(a/240),40-1*Math.sin(a/240),10-1*Math.sin(a/240),0,0,D(360)),t.globalAlpha=.2,t.fillStyle="#000",t.fill(),t.closePath(),x&&Math.ceil(a)%8==0||(t.beginPath(),t.setTransform(1,0,0,1,v,g),S.position.x<I.position.x&&t.scale(-1,1),t.globalAlpha=r?.4:1,t.fillStyle=x?"#f66":"#5cab73",t.arc(0,0,40,0,D(360)),t.fill(),t.closePath(),t.beginPath(),t.arc(-20,0,10,0,D(360)),t.fillStyle="#fff",t.fill(),t.closePath(),t.beginPath(),t.arc(5,0,10,0,D(360)),t.fillStyle="#fff",t.fill(),t.closePath(),t.beginPath(),t.arc(-8,15,10,D(20),D(140)),t.fillStyle="#fff",t.fill(),t.closePath())},M=function(t){t.setTransform(1,0,0,1,v,g),t.beginPath(),c&&(t.arc(-80,0,20*Math.sin(p*Math.PI/2),0,D(360)),t.fillStyle="#fffa6b",t.fill(),t.arc(80,0,20*Math.sin(p*Math.PI/2),0,D(360)),t.fillStyle="#fffa6b",t.fill(),t.closePath(),t.setTransform(-1,0,0,-1,v,g),t.beginPath(),t.fillStyle="#fffa6b",t.rotate(D(115)),t.arc(60,0,20*Math.sin(p*Math.PI/2),0,D(360)),t.fill(),t.closePath()),u&&(t.setTransform(1,0,0,1,v,g),t.arc(-80,0,20*Math.cos(m*Math.PI/2),0,D(360)),t.fillStyle="#fffa6b",t.fill(),t.arc(80,0,20*Math.cos(m*Math.PI/2),0,D(360)),t.fillStyle="#fffa6b",t.fill(),t.closePath(),t.setTransform(-1,0,0,-1,v,g),t.beginPath(),t.fillStyle="#fffa6b",t.rotate(D(115)),t.arc(60,0,20*Math.cos(m*Math.PI/2),0,D(360)),t.fill(),t.closePath(),t.setTransform(-1,0,0,1,v,g),t.beginPath(),t.fillStyle="#fffa6b",t.fillRect(80,-20*Math.sin(Math.PI*m)/2,1e4,20*Math.sin(Math.PI*m)),t.closePath(),t.setTransform(1,0,0,1,v,g),t.beginPath(),t.fillStyle="#fffa6b",t.fillRect(80,-20*Math.sin(Math.PI*m)/2,1e4,20*Math.sin(Math.PI*m)),t.closePath(),t.setTransform(-1,0,0,-1,v,g),t.beginPath(),t.fillStyle="#fffa6b",t.rotate(D(115)),t.fillRect(60,-20*Math.sin(Math.PI*m)/2,1e4,20*Math.sin(Math.PI*m)),t.closePath())},P=function(t){c&&(t.setTransform(1,0,0,1,v,g),t.beginPath(),t.fillStyle="#fffa6b",t.rotate(D(115)),t.arc(40,0,20*Math.sin(p*Math.PI/2),0,D(360)),t.fill(),t.closePath()),u&&h((function(t,i){t.setTransform(1,0,0,1,v,g),t.beginPath(),t.fillStyle="#fffa6b",t.rotate(D(115)),t.arc(40,0,20*Math.cos(m*Math.PI/2),0,D(360)),t.fill(),t.closePath(),t.setTransform(1,0,0,1,v,g),t.beginPath(),t.fillStyle="#fffa6b",t.rotate(D(115)),t.fillRect(40,-20*Math.sin(Math.PI*m)/2,1e4,20*Math.sin(Math.PI*m)),t.closePath()}))};S.position.y<I.position.y?f((function(t){return M(t)})):d((function(t){return M(t)})),S.position.y<I.position.y?f((function(t){return w(t)})):d((function(t){return w(t)})),S.position.y<I.position.y?f((function(t){return P(t)})):d((function(t){return P(t)}))}({time:t,enemy:S,map:O,player:I});break;case 3:!function(t){var e,o,a,n,r,l,h=t.map,c=t.enemy,p=t.time,y=F({time:p,start:c.move.start+c.move.predelay,duration:c.move.speed}),u=y[0],m=y[1],v=F({time:p,start:c.attack.start+c.attack.predelay,duration:c.attack.duration+c.attack.delay}),g=v[0],x=v[1],w=u?i.width/2+(-(h.tileWidth+h.tileHeight)+(c.position.x+(c.move.position.x-c.position.x)*m)*h.tileWidth-(c.position.y+(c.move.position.y-c.position.y)*m)*h.tileWidth/6):i.width/2+(-(h.tileWidth+h.tileHeight)+c.position.x*h.tileWidth-c.position.y*h.tileWidth/6),M=(u?i.height/2+(c.position.y+(c.move.position.y-c.position.y)*m-.5)*h.tileHeight+2*Math.sin(p/240):i.height/2+(c.position.y-.5)*h.tileHeight+2*Math.sin(p/240))-40,P=F({time:p,start:c.damage.start,duration:c.damage.duration})[0],T=function(t,i){t.setTransform(1,0,0,1,w,M),S.position.x<I.position.x&&t.scale(-1,1),t.beginPath(),t.ellipse(0,40-2*Math.sin(p/240),40-1*Math.sin(p/240),10-1*Math.sin(p/240),0,0,D(360)),t.fillStyle="#000",t.globalAlpha=.2,t.fill(),t.closePath(),P&&Math.ceil(p)%8==0||(t.setTransform(1,0,0,1,w,M),S.position.x<I.position.x&&t.scale(-1,1),t.globalAlpha=1,t.beginPath(),u&&(t.globalAlpha=.4),t.arc(0,0,40,0,D(360)),t.fillStyle=P?"#ffb5b5":"#f33",t.arc(0,0,40,0,D(360)),t.moveTo(-25,-20),t.lineTo(-20,-50),t.lineTo(-5,-20),t.moveTo(5,-20),t.lineTo(20,-50),t.lineTo(25,-20),t.fill(),t.closePath(),t.beginPath(),t.arc(-12,-10,14,D(90),D(180)),t.fillStyle="#000",t.fill(),t.closePath(),t.beginPath(),t.arc(0,-10,14,D(-10),D(110)),t.fillStyle="#000",t.fill(),t.closePath(),t.beginPath(),t.arc(-5,22,12,D(170),D(-10)),t.fillStyle="#000",t.fill(),t.closePath())},k=function(t,i){if(g){var e=W(S.attack.position[0].x,S.attack.position[0].y),o=e.x,a=e.y;t.beginPath(),t.fillStyle="#f00",t.filter="blur(8px)",t.setTransform(1,0,0,1,o,a),t.fillRect(-52,-100*Math.sin(x*Math.PI),100,100*Math.sin(x*Math.PI)),t.closePath(),t.beginPath(),t.fillStyle="#ff0",t.filter="blur(8px)",t.setTransform(1,0,0,1,o,a),t.fillRect(-26,-100*Math.sin(x*Math.PI),50,100*Math.sin(x*Math.PI)),t.closePath()}};(null===(e=S.attack.position[0])||void 0===e?void 0:e.y)<I.position.y&&(null===(o=S.attack.position[0])||void 0===o?void 0:o.y)<S.position.y?(s((function(t,i){return k(t)})),S.position.y<I.position.y?f((function(t,i){return T(t)})):d((function(t,i){return T(t)}))):(null===(a=S.attack.position[0])||void 0===a?void 0:a.y)<S.position.y&&(null===(n=S.attack.position[0])||void 0===n?void 0:n.y)>=I.position.y?(f((function(t,i){return k(t)})),S.position.y<I.position.y?f((function(t,i){return T(t)})):d((function(t,i){return T(t)}))):(null===(r=S.attack.position[0])||void 0===r?void 0:r.y)>=S.position.y&&(null===(l=S.attack.position[0])||void 0===l?void 0:l.y)<I.position.y?(S.position.y<I.position.y?f((function(t,i){return T(t)})):d((function(t,i){return T(t)})),f((function(t,i){return k(t)}))):(S.position.y<I.position.y?f((function(t,i){return T(t)})):d((function(t,i){return T(t)})),d((function(t,i){return k(t)})))}({time:t,enemy:S,map:O,player:I});break;case 4:!function(t){var e=t.map,o=t.enemy,a=t.time,n=F({time:a,start:o.move.start+o.move.predelay,duration:o.move.speed}),r=n[0],l=n[1],c=F({time:a,start:o.attack.start+o.attack.predelay,duration:o.attack.duration}),p=c[0],y=c[1],u=F({time:a,start:o.attack.start,duration:o.attack.predelay}),m=u[0],v=u[1],g=r?i.width/2+(-(e.tileWidth+e.tileHeight)+(o.position.x+(o.move.position.x-o.position.x)*l)*e.tileWidth-(o.position.y+(o.move.position.y-o.position.y)*l)*e.tileWidth/6):i.width/2+(-(e.tileWidth+e.tileHeight)+o.position.x*e.tileWidth-o.position.y*e.tileWidth/6),x=(r?i.height/2+(o.position.y+(o.move.position.y-o.position.y)*l-.5)*e.tileHeight+2*Math.sin(a/240):i.height/2+(o.position.y-.5)*e.tileHeight+2*Math.sin(a/240))-40,w=F({time:a,start:o.damage.start,duration:o.damage.duration})[0],M=function(t){t.setTransform(1,0,0,1,g,x),S.position.x<I.position.x&&t.scale(-1,1),t.beginPath(),t.ellipse(0,40-2*Math.sin(a/240),40-1*Math.sin(a/240),10-1*Math.sin(a/240),0,0,D(360)),t.fillStyle="#000",t.globalAlpha=.2,t.fill(),t.closePath(),w&&Math.ceil(a)%8==0||(t.setTransform(1,0,0,1,g,x),S.position.x<I.position.x&&t.scale(-1,1),t.globalAlpha=1,t.beginPath(),r&&(t.globalAlpha=.4),t.arc(0,0,40,0,D(360)),t.fillStyle=w?"#ff9c9c":"#0ff",t.arc(0,0,30,0,D(360)),t.fill(),t.beginPath(),t.arc(-25,-10,10,D(-40),D(120)),t.fillStyle="#000",t.fill(),t.closePath(),t.beginPath(),t.arc(5,-10,12,D(20),D(-120)),t.fillStyle="#000",t.fill(),t.closePath(),t.beginPath(),t.lineWidth=2,t.moveTo(-20,20),t.quadraticCurveTo(-20,0,5,20),t.stroke(),t.closePath())},P=function(t,i,e){var o=W(i,e),a=o.x,n=o.y;t.setTransform(1,0,-.5,1,a,n),t.beginPath(),t.fillStyle="#ccfffb",t.globalAlpha=.5,t.fillRect(-60*v,-20*v,120*v,40*v),t.fill(),t.closePath()},T=function(t,i,e){var o=W(i,e),a=o.x,n=o.y;t.setTransform(1,0,-.5,1,a-60*(1-y),n-20*(1-y)),t.setTransform(1,0,0,1,0,0),t.beginPath();var r=Math.sin(Math.PI*y);t.fillStyle="#ccfffb",t.globalAlpha=1-y,t.moveTo(a-20*r,n+10),t.lineTo(a-30*r,n-120*r),t.lineTo(a+r,n+5),t.fill(),t.closePath()},k=function(t,i,e){var o=W(i,e),a=o.x,n=o.y;t.setTransform(1,0,0,1,a,n-125+130*y),t.beginPath(),t.fillStyle="#ccfffb",t.arc(0,-75,10*(1-y),D(180),D(-20*y)),t.moveTo(0,0),t.lineTo(-10,-75*(1-y)),t.lineTo(10,-75),t.fill(),t.closePath()};S.position.y<I.position.y?f((function(t,i){return M(t)})):h((function(t,i){return M(t)})),(p||m)&&(0===S.attack.type&&S.attack.position.forEach((function(t){var i=t.x,e=t.y;e<I.position.y&&e<S.position.y?(p&&s((function(t,o){return T(t,i,e)})),m&&s((function(t,o){return P(t,i,e)}))):e<S.position.y&&e>=I.position.y?(p&&d((function(t,o){return T(t,i,e)})),m&&s((function(t,o){return P(t,i,e)}))):e>=S.position.y&&e<I.position.y?(p&&f((function(t,o){return T(t,i,e)})),m&&s((function(t,o){return P(t,i,e)}))):(p&&h((function(t,o){return T(t,i,e)})),m&&s((function(t,o){return P(t,i,e)})))})),1===S.attack.type&&S.attack.position.forEach((function(t){var i=t.x,e=t.y;e<I.position.y&&e<S.position.y?s((function(t,o){return k(t,i,e)})):e<S.position.y&&e>=I.position.y?d((function(t,o){return k(t,i,e)})):e>=S.position.y&&e<I.position.y?f((function(t,o){return k(t,i,e)})):h((function(t,o){return k(t,i,e)}))})))}({time:t,enemy:S,map:O,player:I});break;case 5:!function(t){var e=t.map,o=t.enemy,a=t.time,n=F({time:a,start:o.move.start+o.move.predelay,duration:o.move.speed}),r=n[0],l=n[1],c=F({time:a,start:o.attack.start+o.attack.predelay,duration:o.attack.duration+o.attack.delay}),p=c[0],y=c[1],u=F({time:a,start:o.attack.start,duration:o.attack.predelay}),m=u[0],v=u[1],g=r?i.width/2+(-(e.tileWidth+e.tileHeight)+(o.position.x+(o.move.position.x-o.position.x)*l)*e.tileWidth-(o.position.y+(o.move.position.y-o.position.y)*l)*e.tileWidth/6):i.width/2+(-(e.tileWidth+e.tileHeight)+o.position.x*e.tileWidth-o.position.y*e.tileWidth/6),x=(r?i.height/2+(o.position.y+(o.move.position.y-o.position.y)*l-.5)*e.tileHeight+2*Math.sin(a/240):i.height/2+(o.position.y-.5)*e.tileHeight+2*Math.sin(a/240))-40,w=F({time:a,start:o.damage.start,duration:o.damage.duration})[0],M=function(t){t.setTransform(1,0,0,1,g,x),S.position.x<I.position.x&&t.scale(-1,1),t.beginPath(),t.ellipse(0,40-2*Math.sin(a/240),40-1*Math.sin(a/240),10-1*Math.sin(a/240),0,0,D(360)),t.fillStyle="#000",t.globalAlpha=.2,t.fill(),t.closePath(),w&&Math.ceil(a)%8==0||(t.setTransform(1,0,0,1,g,x),S.position.x<I.position.x&&t.scale(-1,1),t.globalAlpha=1,t.beginPath(),t.filter="blur(4px)",r&&(t.globalAlpha=.4),t.arc(0,0,40,0,D(360)),t.fillStyle=w?"#ff6161":"#000",t.fill(),t.closePath(),t.beginPath(),t.filter="blur(2px)",t.arc(-20,-10,5,0,D(360)),t.fillStyle="#fff",t.fill(),t.closePath(),t.beginPath(),t.arc(10,-10,5,0,D(360)),t.fillStyle="#fff",t.fill(),t.closePath())},P=function(t){if(p){var i=W(S.position.x,S.position.y),e=i.x,o=i.y;t.setTransform(1,0,0,1,e,o-40),t.beginPath(),S.attack.position[0].x>S.position.x&&t.scale(-1,1),t.moveTo(0,0),t.filter="blur(2px)",t.lineTo(0,-20),t.lineTo(-140*Math.sin(y*Math.PI),0),t.lineTo(0,20),t.fillStyle=w?"#ff6161":"#000",t.fill(),t.closePath()}},T=function(t){if(m){var i=W(S.position.x,S.position.y),e=i.x,o=i.y;0===S.position.x?t.setTransform(1,0,0,1,e+80,o-40+2*Math.sin(a/240)):t.setTransform(1,0,0,1,e-80,o-40+2*Math.sin(a/240)),t.filter="blur(4px)",t.scale(1,2),t.rotate(a),t.beginPath(),t.fillStyle="#fff",t.fillRect(-60*v,-60*v,120*v,120*v),t.closePath(),t.beginPath(),t.fillStyle="#000",t.fillRect(-50*v,-50*v,100*v,100*v),t.closePath()}},k=function(t){if(p){var i=W(S.position.x,S.position.y),e=i.x,o=i.y;0===S.position.x?t.setTransform(1,0,0,1,e+80,o-40+2*Math.sin(a/240)):t.setTransform(1,0,0,1,e-80,o-40+2*Math.sin(a/240)),t.filter="blur(4px)",t.scale(1,2),t.rotate(a),t.beginPath(),t.fillStyle="#fff",t.fillRect(-60*Math.cos(y*Math.PI/2),-60*Math.cos(y*Math.PI/2),120*Math.cos(y*Math.PI/2),120*Math.cos(y*Math.PI/2)),t.closePath(),t.beginPath(),t.fillStyle="#000",t.fillRect(-50*Math.cos(y*Math.PI/2),-50*Math.cos(y*Math.PI/2),100*Math.cos(y*Math.PI/2),100*Math.cos(y*Math.PI/2)),t.closePath(),t.setTransform(1,0,0,1,e-20,o-40+2*Math.sin(a/240)),t.filter="blur(4px)",t.rotate(D(180)),0===S.position.x?t.scale(-1,2):t.scale(1,2),t.beginPath(),t.fillStyle="#000",0===S.position.x?t.fillRect(100,-80*Math.sin(Math.PI*y)/2,1e4,80*Math.sin(Math.PI*y)):t.fillRect(60,-80*Math.sin(Math.PI*y)/2,1e4,80*Math.sin(Math.PI*y)),t.closePath()}},b=function(t,i,e){if(m){var o=W(i,e),a=o.x,n=o.y;t.beginPath(),t.setTransform(1,0,0,1,a,n),t.scale(2,1),t.arc(0,0,12*Math.sin(v*Math.PI/2),0,D(360)),t.fill(),t.closePath()}},C=function(t,i,e){if(p){var o=W(i,e),a=o.x,n=o.y;t.beginPath(),t.setTransform(1,0,0,1,a,n),t.scale(2,1),t.arc(0,0,12*Math.cos(y*Math.PI/2),0,D(360)),t.fill(),t.closePath()}},A=function(t,i,e){if(p){var o=W(i,e),a=o.x,n=o.y;t.beginPath(),t.setTransform(1,0,0,1,a,n-20),t.scale(1,6*(.5+.5*y)),t.arc(0,-200*y,12,0,D(360)),t.fill(),t.closePath()}};S.position.y<I.position.y?f((function(t,i){return M(t)})):h((function(t,i){return M(t)})),(p||m)&&(0===S.attack.type&&(I.position.y<=S.position.y+1?(d((function(t){return T(t)})),d((function(t){return k(t)}))):(f((function(t){return T(t)})),f((function(t){return k(t)})))),1===S.attack.type&&(I.position.y<=S.position.y?d((function(t){return P(t)})):s((function(t){return P(t)}))),2===S.attack.type&&S.attack.position.forEach((function(t){var i=t.x,e=t.y;e<I.position.y&&e<S.position.y?(s((function(t,o){return C(t,i,e)})),s((function(t,o){return b(t,i,e)})),s((function(t,o){return A(t,i,e)}))):e<S.position.y&&e>=I.position.y?(d((function(t,o){return C(t,i,e)})),s((function(t,o){return b(t,i,e)})),s((function(t,o){return A(t,i,e)}))):e>=S.position.y&&e<I.position.y?(f((function(t,o){return C(t,i,e)})),s((function(t,o){return b(t,i,e)})),s((function(t,o){return A(t,i,e)}))):(h((function(t,o){return C(t,i,e)})),s((function(t,o){return b(t,i,e)})),s((function(t,o){return A(t,i,e)})))})))}({time:t,enemy:S,map:O,player:I})}var e,o,a;!function(t){var i=t.game;if(i.playTime<3e3){var e=Math.ceil((3e3-i.playTime)/1e3);h((function(t,i){t.setTransform(1,0,0,1,i.width/2-24,i.height/2-80),t.shadowColor="#000",t.shadowOffsetX=4,t.shadowOffsetY=4,t.font=$(48),t.fillStyle="#fff",t.fillText(e.toString(),0,0)}))}}({game:wt}),function(t){if(wt.scoreTime>0){var i=Math.round(wt.scoreTime)/1e3,e=Math.floor(i/60);h((function(t,o){t.setTransform(1,0,0,1,o.width/2+140,o.height/2+240),t.font=$(18),t.shadowColor="#000",t.shadowOffsetX=3,t.shadowOffsetY=3,t.fillStyle="#fff",t.fillText(e.toString().padStart(2,"0")+":"+i.toFixed(2).padStart(5,"0"),0,0)}))}else{var o=Math.round(wt.scoreTime)/1e3;Math.floor(o/60),h((function(t,i){t.setTransform(1,0,0,1,i.width/2+140,i.height/2+240),t.font=$(18),t.shadowColor="#000",t.shadowOffsetX=3,t.shadowOffsetY=3,t.fillStyle="#fff",t.fillText("00:00.00",0,0)}))}}(),e={player:I.life,enemy:S.life},o=e.player,a=e.enemy,h((function(t,i){t.setTransform(1,0,0,1,i.width/2-140,i.height/2+240),t.font=$(18),t.shadowOffsetX=3,t.shadowOffsetY=3,t.shadowColor="#000",t.fillStyle="#fff",t.fillText("ROACH",-100,28),t.fillStyle="#FFA",t.fillRect(10,10,2*o,20)})),h((function(t,i){t.setTransform(1,0,0,1,i.width/2-140,i.height/2+240),t.font=$(18),t.shadowOffsetX=3,t.shadowOffsetY=3,t.shadowColor="#000",t.fillStyle="#fff",t.fillText("ENEMY",-100,0),t.fillStyle="#F99",t.fillRect(10,-20,2*a,20)}))}(t),2===kt.sceneType&&(s((function(t,i){t.beginPath();var e=t.createLinearGradient(0,0,0,innerHeight);e.addColorStop(.2,"#060C0D"),e.addColorStop(.4,"#132126"),e.addColorStop(.8,"#1A3940"),e.addColorStop(1,"#4F818C"),t.fillStyle=e,t.fillRect(0,0,i.width,i.height),t.closePath()})),s((function(t,i){t.textBaseline="middle",t.textAlign="center",t.font=$(),t.fillStyle="#fff",t.shadowOffsetX=3,t.shadowOffsetY=3,t.shadowColor="#000",t.fillText("Game Over",i.width/2,i.height/2-40),t.font=$(18),0===ht.index?t.fillStyle=ft:t.fillStyle=dt,t.textBaseline="middle",t.textAlign="center",t.fillText("RETRY",i.width/2-80,i.height/2+40),t.closePath(),t.beginPath(),1===ht.index?t.fillStyle=ft:t.fillStyle=dt,t.fillText("TITLE",i.width/2+80,i.height/2+40),t.closePath(),t.beginPath()}))),3===kt.sceneType&&function(t){var i=Math.sin(t/60),e=Math.round(wt.scoreTime)/1e3,o=Math.floor(e/60);s((function(t,i){var e;t.beginPath(),1===wt.stage&&((e=t.createLinearGradient(0,0,0,innerHeight)).addColorStop(.2,"#0D0D0D"),e.addColorStop(.4,"#401410"),e.addColorStop(.8,"#8C3420")),2===wt.stage&&((e=t.createLinearGradient(0,0,0,innerHeight)).addColorStop(.3,"#252E3E"),e.addColorStop(.6,"#44A748"),e.addColorStop(.9,"#5FBF03")),3===wt.stage&&((e=t.createLinearGradient(0,0,0,innerHeight)).addColorStop(.3,"#1B1A1F"),e.addColorStop(.6,"#51191E"),e.addColorStop(.9,"#CC1017")),4===wt.stage&&((e=t.createLinearGradient(0,0,0,innerHeight)).addColorStop(.3,"#182026"),e.addColorStop(.6,"#759CBF"),e.addColorStop(.9,"#8BBBD9")),5===wt.stage&&((e=t.createLinearGradient(0,0,0,innerHeight)).addColorStop(.3,"#0D0D0D"),e.addColorStop(.6,"#979DA6"),e.addColorStop(.9,"#D7D7D9")),t.fillStyle=e,t.fillRect(0,0,i.width,i.height),t.closePath()})),s((function(t,i){t.setTransform(1,0,0,1,i.width/2,i.height/2),t.beginPath(),t.globalAlpha=.8,t.filter="blur(8px)",1===wt.stage&&(t.fillStyle="#D97652"),2===wt.stage&&(t.fillStyle="#96DF50"),3===wt.stage&&(t.fillStyle="#FB3D31"),4===wt.stage&&(t.fillStyle="#B6DBF2"),5===wt.stage&&(t.fillStyle="#F2F2F2"),t.arc(0,0,320,0,D(360)),t.fill(),t.closePath()})),s((function(t,e){t.setTransform(1,0,0,1,e.width/2-160,e.height/2),t.ellipse(0,1*i+80,60-2*i,20,0,0,2*Math.PI),t.shadowOffsetX=0,t.shadowOffsetY=0,t.globalAlpha=.3,t.fillStyle="#000",t.fill()})),s((function(t,e){t.setTransform(1,0,0,1,e.width/2-160,e.height/2),t.ellipse(0,10*i,30,60,0,0,2*Math.PI),t.shadowOffsetX=0,t.shadowOffsetY=0,t.fillStyle="#6A3D3D",t.fill()})),s((function(t,e){t.setTransform(1,0,0,1,e.width/2-150,e.height/2+10*i),t.arc(0,i,8,0,D(180)),t.shadowOffsetX=0,t.shadowOffsetY=0,t.fillStyle="#000",t.fill()})),s((function(t,e){t.setTransform(1,0,0,1,e.width/2-160,e.height/2+10*i),t.arc(0,-20+i,4,0,D(360)),t.arc(20,-20+i,4,0,D(360)),t.fillStyle="#000",t.fill()})),s((function(t,e){t.setTransform(1,0,0,1,e.width/2-160,e.height/2+10*i),t.moveTo(-15,-10+i),t.quadraticCurveTo(20,20+10*i,35,10+30*i),t.moveTo(30,-10+i),t.quadraticCurveTo(50,20-10*i,65,10-30*i),t.stroke()})),s((function(t,e){t.setTransform(1,0,0,1,e.width/2-160,e.height/2+20),t.moveTo(-10,20+10*i),t.quadraticCurveTo(10+10*i,40-10*i,-10,68),t.moveTo(14,20+10*i),t.quadraticCurveTo(48+10*i,40-10*i,20,60),t.stroke()})),s((function(t,e){t.setTransform(1,0,0,1,e.width/2-154,e.height/2-20),t.moveTo(-10,10*i-28),t.quadraticCurveTo(10+5*i,5*i-80,10*i-24,-60-10*i),t.moveTo(10,10*i-28),t.quadraticCurveTo(40+5*i,5*i-80,1+10*i,-60-10*i),t.stroke()})),s((function(t,i){t.textBaseline="middle",t.textAlign="center",t.font=$(),t.fillStyle="#fff",t.shadowOffsetX=3,t.shadowOffsetY=3,t.shadowColor="#000",t.fillText("Stage "+wt.stage+" Clear",i.width/2,i.height/2-160),t.font=$(18),t.fillText("Time : "+o.toString().padStart(2,"0")+":"+e.toFixed(2).padStart(5,"0"),i.width/2+100,i.height/2-20),t.fillText("Life : "+I.life.toString().padStart(2,"0")+"%",i.width/2+100,i.height/2+40),5===wt.stage&&t.fillText("Thank you for playing!",i.width/2,i.height/2-220),0===ut.index?t.fillStyle=pt:t.fillStyle=yt,t.textBaseline="middle",t.textAlign="center",5===wt.stage?t.fillText("TITLE",i.width/2-80,i.height/2+160):t.fillText("NEXT",i.width/2-80,i.height/2+160),t.closePath(),t.beginPath(),1===ut.index?t.fillStyle=pt:t.fillStyle=yt,t.fillText("RETRY",i.width/2+80,i.height/2+160),t.closePath(),t.beginPath()}))}(t),requestAnimationFrame(St)};requestAnimationFrame(St),lt()})();