(()=>{"use strict";const t=document.getElementById("layer1");function e(){t.width=window.innerWidth,t.height=window.innerHeight,(()=>{const t=document.querySelector("meta[name='viewport']"),e=Math.round(visualViewport.scale*visualViewport.width),i=Math.round(visualViewport.scale*visualViewport.height);e<=460||i<=460?t.setAttribute("content","width=device-width, initial-scale=0.5, user-scalable=0"):e<=768||i<=768?t.setAttribute("content","width=device-width, initial-scale=0.725, user-scalable=0"):t.setAttribute("content","width=device-width, initial-scale=1.0, user-scalable=0")})()}const i=function(t){const e=t.getContext("2d");return i=>{e.save(),e.beginPath(),i(e,t),e.closePath(),e.restore()}}(t),s=function(t){const e=t.getContext("2d");return()=>{e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height)}}(t);e(),window.addEventListener("resize",e);const a=(t=32,e="Arial Black, Arial, sans-serif")=>`bold ${t}pt ${e}`;var n,r,h,l,o,c=function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};class f{constructor(){this.init=t=>{const{position:e}=t;this.position=e},this.update=t=>{this.draw(t)},this.remove=()=>{},this.draw=t=>{i(((e,i)=>{e.setTransform(1,0,0,1,i.width/2-4,i.height/2+26+1*Math.sin(t/128)),c(this,r,"f").call(this,e),e.setTransform(1,0,0,1,i.width/2,i.height/2+24+1*Math.sin(t/128)),c(this,h,"f").call(this,e),e.setTransform(1,0,0,1,i.width/2,i.height/2+62),c(this,l,"f").call(this,e),e.setTransform(1,0,0,1,i.width/2,i.height/2+73),c(this,o,"f").call(this,e),e.setTransform(1,0,0,1,i.width/2+14,i.height/2+73),c(this,o,"f").call(this,e),e.setTransform(1,0,0,1,i.width/2+20,i.height/2+26+1*Math.sin(t/128)),c(this,r,"f").call(this,e),e.setTransform(1,0,0,1,i.width/2,i.height/2+2*Math.sin(t/128)),c(this,n,"f").call(this,e)}))},n.set(this,(t=>{t.fillStyle="#ffefdb",t.fillRect(0,0,24,24),t.fillStyle="#00aeff",t.fillRect(4,8,4,4),t.fillRect(12,8,4,4),t.fillStyle="#ffcc00",t.fillRect(-4,-8,28,12),t.fillRect(20,-4,6,20)})),r.set(this,(t=>{t.fillStyle="#de0034",t.fillRect(0,0,8,38),t.fillStyle="#ffefdb",t.fillRect(0,38,8,8)})),h.set(this,(t=>{t.fillStyle="#de0034",t.fillRect(0,0,24,40)})),l.set(this,(t=>{t.fillStyle="#075aa3",t.fillRect(0,0,24,12)})),o.set(this,(t=>{t.fillStyle="#075aa3",t.fillRect(0,0,10,24),t.fillStyle="#000",t.fillRect(-2,23,12,8)}))}}n=new WeakMap,r=new WeakMap,h=new WeakMap,l=new WeakMap,o=new WeakMap;class d{constructor(){this.start=()=>{this.person.init({position:{x:0,y:0,z:0}})},this.update=t=>{this.person.update(t)},this.end=()=>{this.person.remove()},this.person=new f}}var w,p,u,m,v,g=function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};class y{constructor(){this.start=()=>{g(this,w,"f").call(this)},this.update=t=>{g(this,m,"f").call(this),g(this,v,"f").call(this,t)},this.end=()=>{g(this,p,"f").call(this)},w.set(this,(()=>{window.addEventListener("keydown",g(this,u,"f"))})),p.set(this,(()=>{window.removeEventListener("keydown",g(this,u,"f"))})),u.set(this,(t=>{"Space"===t.code&&window.postMessage({type:"change-scene",payload:"game"},window.origin)})),m.set(this,(()=>{i(((t,e)=>{t.setTransform(1,0,0,1,e.width/2-120,e.height/2-200),t.font=a(24),t.fillText("Sample Game",0,0)}))})),v.set(this,(t=>{i(((e,i)=>{e.setTransform(1,0,0,1,i.width/2-100,i.height/2+2*Math.sin(t/60)),e.font=a(12),e.fillText("Press spacebar to start",0,0)}))}))}}w=new WeakMap,p=new WeakMap,u=new WeakMap,m=new WeakMap,v=new WeakMap;var M,S,T,b=function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};M=new WeakMap,S=new WeakMap,T=new WeakMap,(new class{constructor(){this.start=()=>{this.scenes[this.activeScene].start(),requestAnimationFrame(b(this,S,"f")),b(this,T,"f").call(this)},M.set(this,(t=>{this.scenes[this.activeScene].end(),this.activeScene=t,this.scenes[this.activeScene].start()})),S.set(this,(t=>{console.log(t),s(),this.scenes[this.activeScene].update(t),requestAnimationFrame(b(this,S,"f"))})),T.set(this,(()=>{window.addEventListener("message",(t=>{if(!t.data)return;const{type:e,payload:i}=t.data;switch(e){case"change-scene":b(this,M,"f").call(this,i)}}))})),this.activeScene="game",this.scenes={game:new d,title:new y}}}).start()})();